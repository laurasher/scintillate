<div id="d3-container"></div>
<div class="pearl-panel" [class.pearl-panel--visible]="pearlPanelVisible">
  <div class="pearl-panel__inner">
    <div class="pearl-panel__clams">
      <div class="clam" *ngFor="let clam of clams; let i = index">
        <div class="clam__header">ðŸ¦ª Clam {{i + 1}}</div>
        <div class="pearl" *ngFor="let pearl of clam.pearls">
          <div class="pearl__metrics">
            <span class="pearl__metric">{{pearl.metric1}}</span>
            <span class="pearl__metric">{{pearl.metric2}}</span>
          </div>
          <div class="pearl__text-row">
            <input type="checkbox" class="pearl__checkbox" [(ngModel)]="pearl.checked" aria-label="Select pearl" />
            <span class="pearl__text">{{pearl.text}}</span>
          </div>
        </div>
      </div>
    </div>
    <button class="pearl-panel__toss-btn" (click)="tossBack()" aria-label="Toss the rest back into the sea">
      Toss the rest back into the sea
    </button>
  </div>
</div>
<app-chat (diveForPearlsEvent)="onDiveForPearls()"></app-chat>
<div class="controls-wrapper">
  <div class="controls" [class.controls-hidden]="!controlsVisible">
    <label for="speed-slider">Animation Speed</label>
    <input 
      type="range" 
      id="speed-slider"
      min="0.5" 
      max="3" 
      step="0.1" 
      [value]="animationSpeed"
      (input)="onSpeedChange($event)"
    />
    <span class="speed-value">{{(animationSpeed || 1).toFixed(1)}}x</span>
  </div>
  <button class="toggle-btn" (click)="toggleControls()" [attr.aria-expanded]="controlsVisible" aria-label="Toggle animation controls">
    <span class="toggle-arrow" [class.arrow-up]="controlsVisible">&#8964;</span>
  </button>
</div>